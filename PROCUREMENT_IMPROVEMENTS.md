# –£–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –∑–∞–∫—É–ø–æ–∫

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–∏—Å—Ç–µ–º–∞ ID –∑–∞–∫—É–ø–æ–∫
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `sequenceId` –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–π –Ω—É–º–µ—Ä–∞—Ü–∏–∏ (1, 2, 3...)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª–µ–º `sequence_id SERIAL`
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞

### 2. –°—Ç–∞—Ç—É—Å "–û—Ç–º–µ–Ω–µ–Ω"
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å `cancelled` –≤ –≤–∞–ª–∏–¥–∞—Ü–∏—é backend
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω Telegram API –¥–ª—è –∑–∞—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –§–æ—Ä–º–∞—Ç: `~üõí –ù–û–í–ê–Ø –ó–ê–ö–£–ü–ö–ê~ ‚ùå –ó–ê–ö–ê–ó –û–¢–ú–ï–ù–Å–ù`
- ‚úÖ –ö–Ω–æ–ø–∫–∏ "‚ùå –û—Ç–º–µ–Ω–∏—Ç—å" –¥–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ pending/paid

### 3. –ù–æ–≤—ã–µ —Å—Ç–æ–ª–±—Ü—ã —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ ID –∑–∞–∫–∞–∑–∞ (sequenceId –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ UUID)
- ‚úÖ –î–∞—Ç–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞
- ‚úÖ –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å tooltip –≤—Ä–µ–º–µ–Ω–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞)
- ‚úÖ –¢–æ–≤–∞—Ä—ã (–∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ –≤ –∑–∞–∫—É–ø–∫–µ)
- ‚úÖ –û–±—â–∞—è —Å—É–º–º–∞ –∑–∞–∫—É–ø–∫–∏
- ‚úÖ –°—Ç–∞—Ç—É—Å (–≤—ã–±–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –∫–Ω–æ–ø–∫–∞–º–∏)
- ‚úÖ –†–∞—Å—Ö–æ–¥—ã –Ω–∞ –∑–∞–∫—É–ø–∫—É (–ø–æ–ª–µ logisticsCost)
- ‚úÖ –î–µ–π—Å—Ç–≤–∏—è (–æ–ø—Ä–∏—Ö–æ–¥–æ–≤–∞–Ω–∏–µ –∏ –¥—Ä.)

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
```sql
-- –ù–æ–≤—ã–µ –ø–æ–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ purchases
ALTER TABLE "purchases" ADD COLUMN "sequence_id" SERIAL;
ALTER TABLE "purchases" ADD COLUMN "status_updated_at" TIMESTAMP(3) DEFAULT CURRENT_TIMESTAMP;
ALTER TABLE "purchases" ADD COLUMN "logistics_cost" DECIMAL(10,2) DEFAULT 0;
```

### 5. Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ "cancelled" —Å –∑–∞—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ–º
- ‚úÖ –ö–Ω–æ–ø–∫–∏ –æ—Ç–º–µ–Ω—ã –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–∫—É–ø–æ–∫
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ sequenceId –≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è—Ö

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
   ```bash
   # Backend
   cd backend && PORT=3011 node dist/server.js
   
   # Frontend  
   npm run dev
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
   - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫—É–ø–∫–∏ —Å –Ω–æ–≤—ã–º ID
   - –°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏
   - –û—Ç–º–µ–Ω–∞ –∑–∞–∫—É–ø–∫–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ Telegram
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å—Ç–æ–ª–±—Ü–æ–≤

3. **–î–æ—Ä–∞–±–æ—Ç–∞—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
   - Tooltip —Å –∏—Å—Ç–æ—Ä–∏–µ–π –∏–∑–º–µ–Ω–µ–Ω–∏–π —Å—Ç–∞—Ç—É—Å–∞
   - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ç–æ–≤–∞—Ä–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –ª–æ–≥–∏—Å—Ç–∏–∫—É

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Backend –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `purchaseController.ts` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ cancelled
- `schema.prisma` - –Ω–æ–≤—ã–µ –ø–æ–ª—è Purchase –º–æ–¥–µ–ª–∏
- –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ–Ω–µ–Ω–∞

### Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `procurement/page.tsx` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π Purchase
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ handleStatusChange

### API –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- `/api/telegram` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞—á–µ—Ä–∫–∏–≤–∞–Ω–∏—è –æ—Ç–º–µ–Ω–µ–Ω–Ω—ã—Ö
- `/api/purchases/:id/status` - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ cancelled —Å—Ç–∞—Ç—É—Å–∞
- Webhook –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–Ω–æ–ø–æ–∫ Telegram 
