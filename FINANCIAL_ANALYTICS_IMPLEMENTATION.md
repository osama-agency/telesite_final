# üí∞ –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ - –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

## –û–±–∑–æ—Ä

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —Å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é —Ç–æ–≤–∞—Ä–æ–≤ –≤ —Ç—É—Ä–µ—Ü–∫–∏—Ö –ª–∏—Ä–∞—Ö (‚Ç∫) –∏ —Ä–∞—Å—á–µ—Ç–æ–º –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏, ROI –∏ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏.

## –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `costPriceTRY` –≤ —Ç–∞–±–ª–∏—Ü—É `products` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ –ª–∏—Ä–∞—Ö
- –°–æ–∑–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞ `product_prices` –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω –∏ –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç
- –í—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### 2. –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏–∑ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
- –£—Å–ø–µ—à–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ 25 —Ç–æ–≤–∞—Ä–æ–≤ —Å —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å—é –≤ –ª–∏—Ä–∞—Ö
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ —Ä—É–±–ª—è—Ö –ø–æ –∫—É—Ä—Å—É 2.13 ‚ÇΩ/‚Ç∫

### 3. Backend API
–°–æ–∑–¥–∞–Ω –Ω–æ–≤—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä `priceController.ts` —Å endpoints:
- `GET /api/prices/analytics` - —Ñ–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º —Ç–æ–≤–∞—Ä–∞–º
- `GET /api/prices/history/:productId` - –∏—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω —Ç–æ–≤–∞—Ä–∞
- `PUT /api/prices/cost-try/:productId` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –≤ –ª–∏—Ä–∞—Ö
- `POST /api/prices/bulk-update` - –º–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω

### 4. –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

API —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- **–°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å** –≤ ‚Ç∫ –∏ ‚ÇΩ
- **–ú–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å** –≤ % –∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö
- **ROI** (Return on Investment) –≤ %
- **–û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å** —Ç–æ–≤–∞—Ä–æ–≤
- **–ü—Ä–∏–±—ã–ª—å** –∑–∞ –ø–µ—Ä–∏–æ–¥
- **–°—Ç–æ–∏–º–æ—Å—Ç—å —Å–∫–ª–∞–¥–∞**
- **–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –≤—ã—Ä—É—á–∫–∞**

### 5. Frontend —Å—Ç—Ä–∞–Ω–∏—Ü—ã

–°–æ–∑–¥–∞–Ω—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
- `src/app/[lang]/(dashboard)/(private)/financial-analytics/page.tsx` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `src/app/[lang]/(dashboard)/(private)/analytics-demo/page.tsx` - –¥–µ–º–æ –≤–µ—Ä—Å–∏—è
- `src/components/financial/MarginChart.tsx` - –≥—Ä–∞—Ñ–∏–∫ –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- `src/components/financial/TurnoverChart.tsx` - –≥—Ä–∞—Ñ–∏–∫ –æ–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç–∏

## –ü—Ä–∏–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–∑ API

```json
{
  "success": true,
  "data": {
    "stats": {
      "totalStockValue": "1208519.40",      // –°—Ç–æ–∏–º–æ—Å—Ç—å —Å–∫–ª–∞–¥–∞
      "totalPotentialRevenue": "4730700.00", // –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –≤—ã—Ä—É—á–∫–∞
      "totalSalesRevenue": "1239150.00",     // –í—ã—Ä—É—á–∫–∞ –∑–∞ 30 –¥–Ω–µ–π
      "totalProfit": "927445.80",            // –ü—Ä–∏–±—ã–ª—å –∑–∞ 30 –¥–Ω–µ–π
      "averageMargin": "75.11",              // –°—Ä–µ–¥–Ω—è—è –º–∞—Ä–∂–∞ %
      "averageROI": "334.98"                 // –°—Ä–µ–¥–Ω–∏–π ROI %
    },
    "products": [
      {
        "id": 10,
        "name": "Atominex 25 mg",
        "costPriceTRY": 765,      // –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ –ª–∏—Ä–∞—Ö
        "costPriceRUB": 1629.45,  // –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å –≤ —Ä—É–±–ª—è—Ö
        "retailPrice": 5500,      // –†–æ–∑–Ω–∏—á–Ω–∞—è —Ü–µ–Ω–∞
        "margin": 3870.55,        // –ú–∞—Ä–∂–∞ –≤ —Ä—É–±–ª—è—Ö
        "marginPercent": "70.37", // –ú–∞—Ä–∂–∞ –≤ %
        "roi": "237.54",          // ROI %
        "stockQuantity": 99,      // –û—Å—Ç–∞—Ç–æ–∫ –Ω–∞ —Å–∫–ª–∞–¥–µ
        "salesQuantity": 36,      // –ü—Ä–æ–¥–∞–Ω–æ –∑–∞ 30 –¥–Ω–µ–π
        "turnover": "0.36",       // –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º–æ—Å—Ç—å
        "profit": "139339.80"     // –ü—Ä–∏–±—ã–ª—å
      }
    ]
  }
}
```

## –¢–æ–ø-5 —Å–∞–º—ã—Ö –ø—Ä–∏–±—ã–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤

| –¢–æ–≤–∞—Ä | –°–µ–±–µ—Å—Ç. ‚Ç∫ | –ú–∞—Ä–∂–∞ % | ROI % | –ü—Ä–∏–±—ã–ª—å |
|-------|-----------|---------|-------|---------|
| Atominex 25 mg | 765 ‚Ç∫ | 70.37% | 237.54% | 139,340 ‚ÇΩ |
| Atominex 40 mg | 416 ‚Ç∫ | 82.28% | 464.28% | 135,759 ‚ÇΩ |
| Atominex 80 mg | 770 ‚Ç∫ | 71.48% | 250.59% | 82,198 ‚ÇΩ |
| Attex 4 mg (—Å–∏—Ä–æ–ø) | 280 ‚Ç∫ | 87.83% | 721.60% | 73,161 ‚ÇΩ |
| Atominex 60 mg | 595 ‚Ç∫ | 76.96% | 333.98% | 67,722 ‚ÇΩ |

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### 1. –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```bash
curl http://localhost:3011/api/prices/analytics
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏
```bash
curl -X PUT http://localhost:3011/api/prices/cost-try/10 \
  -H "Content-Type: application/json" \
  -d '{"costPriceTRY": 800, "exchangeRate": 2.13}'
```

### 3. –ú–∞—Å—Å–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ü–µ–Ω
```bash
curl -X POST http://localhost:3011/api/prices/bulk-update \
  -H "Content-Type: application/json" \
  -d '{
    "exchangeRate": 2.13,
    "prices": [
      {"name": "Atominex 10 mg", "costPriceTRY": 455},
      {"name": "Atominex 25 mg", "costPriceTRY": 765}
    ]
  }'
```

## –î–æ—Å—Ç—É–ø –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º

- –§–∏–Ω–∞–Ω—Å–æ–≤–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞: http://localhost:3000/ru/financial-analytics
- –î–µ–º–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞: http://localhost:3000/ru/analytics-demo

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º API –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –¶–ë –†–§
3. –î–æ–±–∞–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ –≤ Excel/PDF
4. –°–æ–∑–¥–∞—Ç—å –¥–∞—à–±–æ—Ä–¥ —Å –∫–ª—é—á–µ–≤—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
5. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ ML-–∞–Ω–∞–ª–∏—Ç–∏–∫—É 
